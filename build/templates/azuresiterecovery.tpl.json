{
    "version": "Notebook/1.0",
    "items": [
        {
            "type": 12,
            "content": {
            "version": "NotebookGroup/1.0",
            "groupType": "editable",
            "items": [
                {
                "type": 9,
                "content": {
                    "version": "KqlParameterItem/1.0",
                    "parameters": [
                    {
                        "id": "aa0176d8-14ff-4dc5-9ae7-b8029f565674",
                        "version": "KqlParameterItem/1.0",
                        "name": "Subscriptions",
                        "type": 6,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "typeSettings": {
                        "additionalResourceOptions": [
                            "value::all"
                        ],
                        "includeAll": true,
                        "showDefault": false
                        },
                        "defaultValue": "value::all",
                        "value": [
                        "value::all"
                        ]
                    },
                    {
                        "id": "91aa9ba3-ed60-4472-8dd9-1c2cb6255757",
                        "version": "KqlParameterItem/1.0",
                        "name": "ResourceGroup",
                        "label": "Resource Group",
                        "type": 2,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "query": "resources\r\n| distinct resourceGroup",
                        "crossComponentResources": [
                        "{Subscriptions}"
                        ],
                        "typeSettings": {
                        "additionalResourceOptions": [
                            "value::all"
                        ],
                        "showDefault": false
                        },
                        "defaultValue": "value::all",
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                    },
                    {
                        "id": "5a4f6d34-9f89-4ef8-b4ee-fb0580ec016d",
                        "version": "KqlParameterItem/1.0",
                        "name": "Environment",
                        "type": 2,
                        "multiSelect": true,
                        "quote": "'",
                        "delimiter": ",",
                        "query": "resources\r\n| extend Environment = case(\r\ntags.Environment <> \"\", tags.Environment,\r\ntags.environment <> \"\", tags.environment,\r\ntags.Env <> \"\", tags.Env,\r\ntags.env <> \"\", tags.env,\r\ntolower(name) contains \"prod\", \"Production\",\r\ntolower(name) contains \"dev\", \"Development\",\r\ntolower(name) contains \"qa\", \"QA\",\r\ntolower(name) contains \"uat\", \"UAT\",\r\ntolower(name) contains \"sit\", \"SIT\",\r\ntolower(name) contains \"test\", \"Test\",\r\n\"Undefined\")\r\n| distinct Environment",
                        "crossComponentResources": [
                        "{Subscriptions}"
                        ],
                        "typeSettings": {
                        "additionalResourceOptions": [
                            "value::all"
                        ]
                        },
                        "defaultValue": "value::all",
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources"
                    },
                    {
                        "id": "9d6afcdc-172c-4bef-8bab-dc372c5d3bb4",
                        "version": "KqlParameterItem/1.0",
                        "name": "TagName",
                        "label": "Tag Name",
                        "type": 2,
                        "query": "Resources\r\n| where tags != '' and tags != '[]'\r\n| mvexpand tags\r\n| extend tagName = tostring(bag_keys(tags)[0])\r\n| distinct tagName\r\n| sort by tagName asc",
                        "crossComponentResources": [
                        "{Subscriptions}"
                        ],
                        "typeSettings": {
                        "additionalResourceOptions": []
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources",
                        "value": null
                    },
                    {
                        "id": "95781001-338b-4ed3-81dc-ce16f2a98bf0",
                        "version": "KqlParameterItem/1.0",
                        "name": "TagValue",
                        "label": "Tag Value",
                        "type": 2,
                        "query": "Resources\r\n| mvexpand tags\r\n| extend tagName = tostring(bag_keys(tags)[0])\r\n| extend tagValue = tostring(tags[tagName])\r\n| where tags != '' and tags != '[]' and tostring(bag_keys(tags)[0]) == '{TagName}'\r\n| distinct tagValue\r\n| sort by tagValue asc",
                        "crossComponentResources": [
                        "{Subscriptions}"
                        ],
                        "typeSettings": {
                        "additionalResourceOptions": []
                        },
                        "queryType": 1,
                        "resourceType": "microsoft.resourcegraph/resources",
                        "value": null
                    },
                    {
                        "id": "e929bc01-08ec-45fe-bc6a-4e0267460dfa",
                        "version": "KqlParameterItem/1.0",
                        "name": "SLA",
                        "label": "Show SLA",
                        "type": 10,
                        "description": "This will show the SLA information for the focus area",
                        "isRequired": true,
                        "typeSettings": {
                        "additionalResourceOptions": [],
                        "showDefault": false
                        },
                        "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\", \"selected\":true},\r\n {\"value\": \"No\", \"label\": \"No\"}]"
                    },
                    {
                        "id": "9581cbc6-0f0f-42be-8ae8-6fe94de00ab8",
                        "version": "KqlParameterItem/1.0",
                        "name": "Help",
                        "label": "Show Help",
                        "type": 10,
                        "isRequired": true,
                        "typeSettings": {
                        "additionalResourceOptions": []
                        },
                        "jsonData": "[{\"value\": \"Yes\", \"label\": \"Yes\", \"selected\":true },\r\n {\"value\": \"No\", \"label\": \"No\"}]"
                    }
                    ],
                    "style": "pills",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces"
                },
                "name": "parameters - 13"
                },
                {
                    "type": 12,
                    "content": {
                      "version": "NotebookGroup/1.0",
                      "groupType": "editable",
                      "items": [
                        {
                          "type": 1,
                          "content": {
                            "json": "[SLA for Azure Site Recovery](https://azure.microsoft.com/support/legal/sla/site-recovery/)\r\n* For each Protected Instance configured for On-Premises-to-On-Premises Failover, we guarantee at least 99.9% availability of the Site Recovery service. Availability is calculated over a monthly billing cycle.\r\n* For each Protected Instance configured for On-Premises-to-Azure planned and unplanned Failover, we guarantee a two-hour Recovery Time Objective.\r\n* For each Protected Instance configured for Azure-to-Azure Failover, we guarantee a two-hour Recovery Time Objective.\r\n\r\n> SLA accurate at time of release. Latest information is available [here](https://azure.microsoft.com/support/legal/sla/site-recovery/)",
                            "style": "upsell"
                          },
                          "conditionalVisibility": {
                            "parameterName": "SLA",
                            "comparison": "isEqualTo",
                            "value": "Yes"
                          },
                          "name": "Backup SLA"
                        },
                        {
                          "type": 1,
                          "content": {
                            "json": "> Azure Site Recovery can help your business to keep doing business during major IT outages. Azure Site Recovery offers ease of deployment, cost effectiveness, and dependability. <br>Deploy replication, failover, and recovery processes through Site Recovery to help keep your applications running during planned and unplanned outages.\r\n\r\n* Where configured, Azure Site Recovery protected Virtual Machines will be listed in a table. \r\n* Ensure that each of the following parameters are selected from the drop down lists:\r\n\t* Subscription\r\n\t* Vault\r\n\t* Resource Group",
                            "style": "info"
                          },
                          "conditionalVisibility": {
                            "parameterName": "Help",
                            "comparison": "isEqualTo",
                            "value": "Yes"
                          },
                          "name": "Backup Help"
                        },
                        {
                          "type": 3,
                          "content": {
                            "version": "KqlItem/1.0",
                            "query": ${kql_azuresiterecovery_resources_details},
                            "size": 0,
                            "showExportToExcel": true,
                            "queryType": 1,
                            "resourceType": "microsoft.resourcegraph/resources",
                            "crossComponentResources": [
                              "{Subscriptions}"
                            ],
                            "gridSettings": {
                              "formatters": [
                                {
                                  "columnMatch": "$gen_group",
                                  "formatter": 13,
                                  "formatOptions": {
                                    "linkTarget": "Resource",
                                    "showIcon": true
                                  }
                                },
                                {
                                  "columnMatch": "Type",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "Name",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "Kind",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "SubscriptionId",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "State",
                                  "formatter": 18,
                                  "formatOptions": {
                                    "thresholdsOptions": "icons",
                                    "thresholdsGrid": [
                                      {
                                        "operator": "==",
                                        "thresholdValue": "succeeded",
                                        "representation": "success",
                                        "text": "{0}{1}"
                                      },
                                      {
                                        "operator": "!=",
                                        "thresholdValue": "succeeded",
                                        "representation": "2",
                                        "text": "{0}{1}"
                                      },
                                      {
                                        "operator": "Default",
                                        "thresholdValue": null,
                                        "representation": "unknown",
                                        "text": "{0}{1}"
                                      }
                                    ]
                                  }
                                },
                                {
                                  "columnMatch": "Location",
                                  "formatter": 17
                                },
                                {
                                  "columnMatch": "Zones",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "AvailabilityZone",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "AvailabilitySet",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "Capacity",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "FaultDomain",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "OSDisk",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "ReadReplica",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "AutomaticFailover",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "MultipleWriteLocations",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "StorageAutogrow",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "ReplicationRole",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "Backup",
                                  "formatter": 5
                                },
                                {
                                  "columnMatch": "SubscriptionName",
                                  "formatter": 5
                                }
                              ],
                              "rowLimit": 10000,
                              "hierarchySettings": {
                                "treeType": 1,
                                "groupBy": [
                                  "SubscriptionId"
                                ],
                                "finalBy": "Name"
                              },
                              "labelSettings": [
                                {
                                  "columnId": "SubscriptionId",
                                  "label": "Subscription"
                                }
                              ]
                            }
                          },
                          "name": "kql_azuresiterecovery_resources_details"
                        }
                      ]
                    },
                    "name": "Backup"
                }
            ]
            },
            "name": "summary group"
        }
    ]
}