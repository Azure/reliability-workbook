{
    "version": "Notebook/1.0",
    "items": [
      {
        "type": 11,
        "content": {
          "version": "LinkItem/1.0",
          "style": "tabs",
          "links": [
            {
              "id": "090bef23-a5f0-4572-bde1-5caf26d2d989",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Overview",
              "subTarget": "OV",
              "style": "link"
            },
            {
              "id": "d983c7c7-b5a0-4245-86fa-52ac1266fb13",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Azure Advisor",
              "subTarget": "Advisor",
              "style": "link"
            },
            {
              "id": "88c013ec-1149-411f-8b35-02e737237a91",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Azure Site Recovery",
              "subTarget": "Backup",
              "style": "link"
            },
            {
              "id": "9b8f2619-143e-47eb-a821-aadcf29c095d",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Compute",
              "subTarget": "Compute",
              "style": "link"
            },
            {
              "id": "ea4f305b-6689-4706-9627-8b4de5a8c098",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Containers",
              "subTarget": "Containers",
              "style": "link"
            },
            {
              "id": "9a24ddec-d921-4956-bdfd-b43f8a4a1dae",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Databases",
              "subTarget": "Databases",
              "style": "link"
            },
            {
              "id": "647b5890-5962-42e9-acdd-6a6392ce74c1",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Integration",
              "subTarget": "Integration",
              "style": "link"
            },
            {
              "id": "346cd3cc-65ff-49dd-ae87-fc907b52dc37",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Networking",
              "subTarget": "Networking",
              "style": "link"
            },
            {
              "id": "946b8b66-9891-4017-b5dd-f6527f28cee4",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Storage",
              "subTarget": "Storage",
              "style": "link"
            },
            {
              "id": "8e297f94-65ab-4c53-9513-29204af07f80",
              "cellValue": "selectedTab",
              "linkTarget": "parameter",
              "linkLabel": "Web",
              "subTarget": "Web",
              "style": "link"
            }
          ]
        },
        "name": "links - 5"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "parameters": [
                  {
                    "id": "e4edb4c3-543b-419b-86dc-9539f3279c35",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "description": "Lists all subscriptions.",
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "ec96194d-d118-47b7-aee5-da4ae8d314c5",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "value": "Yes",
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    }
                  }
                ],
                "style": "pills",
                "queryType": 0,
                "resourceType": "microsoft.operationalinsights/workspaces"
              },
              "name": "parameters - 0 - Copy - Copy - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "> Azure Advisor analyzes your configurations and usage telemetry and offers personalized, actionable recommendations to help you optimize your Azure resources for reliability, security, operational excellence, performance, and cost.\r\n\r\n* Azure Advisor is available automatically without any configuration.\r\n* The table in this workbook specifically relate to any reliability recommendations that may apply to the selected subscription(s).\r\n* Filter advisor recommendations using the subscriptions parameter as required.",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "Advisor Help"
            },
            {
              "type": 3,
              "content": {
                "version": "KqlItem/1.0",
                "query": "advisorresources\r\n| extend Category = tostring(properties.category)\r\n| extend Description = tostring(properties.shortDescription.problem)\r\n| extend ImpactedField = tostring(properties.impactedField)\r\n| extend ImpactedValue = tostring(properties.impactedValue)\r\n| extend Impact = tostring(properties.impact)\r\n| extend LastUpdated = tostring(properties.lastUpdated)\r\n| project ImpactedValue, resourceGroup, Category, Impact, ImpactedField, Description, LastUpdated\r\n| where Category == \"HighAvailability\"",
                "size": 3,
                "title": "Advisor - Reliability",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "gridSettings": {
                  "formatters": [
                    {
                      "columnMatch": "Impact",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "colors",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "High",
                            "representation": "redBright",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Medium",
                            "representation": "orange",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Low",
                            "representation": "green",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "gray",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "LastUpdated",
                      "formatter": 6
                    }
                  ],
                  "labelSettings": [
                    {
                      "columnId": "ImpactedValue",
                      "label": "Impacted Resource"
                    },
                    {
                      "columnId": "resourceGroup",
                      "label": "Resource Group"
                    },
                    {
                      "columnId": "Category"
                    },
                    {
                      "columnId": "Impact"
                    },
                    {
                      "columnId": "ImpactedField",
                      "label": "Impacted Resource Type"
                    },
                    {
                      "columnId": "Description"
                    },
                    {
                      "columnId": "LastUpdated",
                      "label": "Last Updated"
                    }
                  ]
                }
              },
              "name": "query - 0"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Advisor"
        },
        "name": "Advisor"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 1,
              "content": {
                "json": "## Reliability Workbook\r\n* Building a reliable application in the cloud is different from traditional application development. While historically you may have purchased levels of redundant higher-end hardware to minimize the chance of an entire application platform failing, in the cloud, we acknowledge up front that failures will happen. Instead of trying to prevent failures altogether, the goal is to minimize the effects of a single failing component.\r\n* To assess your workload using the tenets found in the Microsoft Azure Well-Architected Framework, see the [Microsoft Azure Well-Architected Review](https://docs.microsoft.com/en-us/assessments/?id=azure-architecture-review&mode=pre-assessment).\r\n* Reliable applications are:\r\n\t* Resilient and recover gracefully from failures, and they continue to function with minimal downtime and data loss before full recovery.\r\n\t* Highly available (HA) and run as designed in a healthy state with no significant downtime.\r\n* Understanding how these elements work together — and how they affect cost — is essential to building a reliable application. It can help you determine how much downtime is acceptable, the potential cost to your business, and which functions are necessary during a recovery.\r\n* Reliability considerations for individual Azure services are provided in the [Resiliency checklist for specific Azure services](https://docs.microsoft.com/en-us/azure/architecture/checklist/resiliency-per-service).\r\n\r\n> Reference: [Microsoft Azure Well-Architected Framework - Reliability Pillar](https://docs.microsoft.com/en-us/azure/architecture/framework/resiliency/overview)"
              },
              "name": "text - 0"
            },
            {
              "type": 1,
              "content": {
                "json": "A SUCCESS status in this workbook indicates an implemented feature that can result in a higher SLA, and/or increased ability to restore a service.",
                "style": "success"
              },
              "name": "text - 1"
            },
            {
              "type": 1,
              "content": {
                "json": "A WARNING status in this workbook indicates a feature that has not been implemented, and therefore can result in a reduced SLA, and/or reduced ability to restore a service.",
                "style": "warning"
              },
              "name": "text - 2"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "OV"
        },
        "name": "Overview"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 9,
                    "content": {
                      "version": "KqlParameterItem/1.0",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "parameters": [
                        {
                          "id": "7633231b-140c-44a4-93c5-d59c36b37838",
                          "version": "KqlParameterItem/1.0",
                          "name": "Subscriptions",
                          "type": 6,
                          "isRequired": true,
                          "multiSelect": true,
                          "quote": "'",
                          "delimiter": ",",
                          "value": [
                            "value::all"
                          ],
                          "typeSettings": {
                            "additionalResourceOptions": [
                              "value::all"
                            ],
                            "includeAll": true,
                            "showDefault": false
                          },
                          "timeContext": {
                            "durationMs": 86400000
                          },
                          "defaultValue": "value::all"
                        },
                        {
                          "id": "099d86cc-9ccb-4234-84c1-943e15f77ff7",
                          "version": "KqlParameterItem/1.0",
                          "name": "Criticality",
                          "type": 2,
                          "multiSelect": true,
                          "quote": "'",
                          "delimiter": ",",
                          "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                          "crossComponentResources": [
                            "{Subscriptions}"
                          ],
                          "value": [
                            "value::all"
                          ],
                          "typeSettings": {
                            "additionalResourceOptions": [
                              "value::all"
                            ],
                            "showDefault": false
                          },
                          "defaultValue": "value::all",
                          "queryType": 1,
                          "resourceType": "microsoft.resourcegraph/resources"
                        },
                        {
                          "id": "1153a137-08bc-4832-9783-009b628f0a9d",
                          "version": "KqlParameterItem/1.0",
                          "name": "SLA",
                          "label": "Show SLA",
                          "type": 10,
                          "description": "This will show the SLA information for the focus area.",
                          "isRequired": true,
                          "typeSettings": {
                            "additionalResourceOptions": [],
                            "showDefault": false
                          },
                          "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                          "timeContext": {
                            "durationMs": 86400000
                          }
                        },
                        {
                          "id": "f9d90ba0-dae5-45b5-9e9a-68dbed7f0ad1",
                          "version": "KqlParameterItem/1.0",
                          "name": "Help",
                          "label": "Show Help",
                          "type": 10,
                          "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                          "isRequired": true,
                          "typeSettings": {
                            "additionalResourceOptions": [],
                            "showDefault": false
                          },
                          "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                          "timeContext": {
                            "durationMs": 86400000
                          }
                        }
                      ],
                      "style": "pills",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources"
                    },
                    "name": "parameters - 0 - Copy"
                  },
                  {
                    "type": 9,
                    "content": {
                      "version": "KqlParameterItem/1.0",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "parameters": [
                        {
                          "id": "bd278e9e-21fd-460d-a0e3-b13e077a2309",
                          "version": "KqlParameterItem/1.0",
                          "name": "Subscriptions",
                          "type": 6,
                          "isRequired": true,
                          "multiSelect": true,
                          "quote": "'",
                          "delimiter": ",",
                          "value": [
                            "value::all"
                          ],
                          "typeSettings": {
                            "additionalResourceOptions": [
                              "value::all"
                            ],
                            "includeAll": true,
                            "showDefault": false
                          },
                          "timeContext": {
                            "durationMs": 86400000
                          },
                          "defaultValue": "value::all"
                        },
                        {
                          "id": "3496ab42-96bf-46c5-ab68-e409c4ea091c",
                          "version": "KqlParameterItem/1.0",
                          "name": "Criticality",
                          "type": 2,
                          "multiSelect": true,
                          "quote": "'",
                          "delimiter": ",",
                          "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                          "crossComponentResources": [
                            "{Subscriptions}"
                          ],
                          "value": [
                            "value::all"
                          ],
                          "typeSettings": {
                            "additionalResourceOptions": [
                              "value::all"
                            ],
                            "showDefault": false
                          },
                          "defaultValue": "value::all",
                          "queryType": 1,
                          "resourceType": "microsoft.resourcegraph/resources"
                        },
                        {
                          "id": "d55f4971-fd8a-417e-9405-a27d1d856ee4",
                          "version": "KqlParameterItem/1.0",
                          "name": "SLA",
                          "label": "Show SLA",
                          "type": 10,
                          "description": "This will show the SLA information for the focus area.",
                          "isRequired": true,
                          "typeSettings": {
                            "additionalResourceOptions": [],
                            "showDefault": false
                          },
                          "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                          "timeContext": {
                            "durationMs": 86400000
                          }
                        },
                        {
                          "id": "382d0692-c167-45f9-bc53-173cfe46540d",
                          "version": "KqlParameterItem/1.0",
                          "name": "Help",
                          "label": "Show Help",
                          "type": 10,
                          "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                          "isRequired": true,
                          "typeSettings": {
                            "additionalResourceOptions": [],
                            "showDefault": false
                          },
                          "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                          "timeContext": {
                            "durationMs": 86400000
                          }
                        }
                      ],
                      "style": "pills",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources"
                    },
                    "name": "parameters - 0"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "Backup"
              },
              "name": "Backup"
            },
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "parameters": [
                  {
                    "id": "c7be4626-a5bf-49c2-83d4-e78f4d5c52a8",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "9017d91b-7134-4b67-808d-0e96c1664fb0",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "fc2a73d7-6fba-4dd6-890a-568f15e3d1d5",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    }
                  },
                  {
                    "id": "4fd81c4f-7bca-4138-81e7-67c9f86517df",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    }
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy - Copy"
            },
            {
              "type": 11,
              "content": {
                "version": "LinkItem/1.0",
                "style": "tabs",
                "links": [
                  {
                    "id": "111d0db9-8c81-413d-9d93-bca6541aa953",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Azure Firewall",
                    "subTarget": "AF",
                    "style": "link"
                  },
                  {
                    "id": "c7031524-3e4c-417b-8675-f49985b0e4a9",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Azure Front Door",
                    "subTarget": "AFD",
                    "style": "link"
                  },
                  {
                    "id": "15e12511-eaa3-457d-9de5-aad6fc445c2d",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Application Gateway",
                    "subTarget": "AG",
                    "style": "link"
                  },
                  {
                    "id": "ff60a2f0-1c78-4a47-8f21-aaee8675cc1c",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Load Balancer",
                    "subTarget": "LB",
                    "style": "link"
                  },
                  {
                    "id": "9b2af52f-ffd5-43d7-9055-9a76f56ca89a",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Web Application Firewall",
                    "subTarget": "WAF",
                    "style": "link"
                  }
                ]
              },
              "name": "links - 5"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Load Balancer](https://azure.microsoft.com/en-us/support/legal/sla/load-balancer/v1_0/)\r\n* We guarantee that a Load Balanced Endpoint using Azure Standard Load Balancer, serving two or more Healthy Virtual Machine Instances, will be available 99.99% of the time.\r\n* Basic Load Balancer is excluded from this SLA.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/load-balancer/v1_0/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2 - Copy - Copy"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* WIP",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type == \"microsoft.network/loadbalancers\"\r\n| extend SkuName = tostring(sku.name)\r\n| extend Tier = tostring(sku.tier)\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n\t\t\t//sub name\r\n| project ResourceId = id, Name = name, Type = type, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Zones = zones, SkuName, Tier, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend SubscriptionName = name\r\n| distinct SubscriptionName, subscriptionId\r\n| project SubscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName,SubscriptionId,Name,ResourceId,Type,Location,ResourceGroup, Zones, SkuName, Tier, Criticality",
                      "size": 0,
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "ResourceId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SkuName",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Standard",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Basic",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Criticality",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Mission Critical",
                                  "representation": "redBright",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        }
                      }
                    },
                    "name": "query - 4"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "LB"
              },
              "name": "LB"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Web Application Firewall](https://azure.microsoft.com/en-us/support/legal/sla/web-application-firewall/v1_0/)\r\n* Web Application Firewall availability guarantees are included in the SLA of the deployment option chosen, Application Gateway or Azure Front Door. Please see the [Application Gateway SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/), and [Azure Front Door SLA](https://azure.microsoft.com/support/legal/sla/frontdoor/) for more details.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/web-application-firewall/v1_0/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "WAFSLA"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "WAF"
              },
              "name": "WAF"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Application Gateway](https://azure.microsoft.com/en-us/support/legal/sla/application-gateway/v1_2/)\r\n* We guarantee that each Application Gateway Cloud Service having two or more medium or larger instances, or deployments capable of supporting autoscale or zone redundancy, will be available at least 99.95% of the time.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/application-gateway/v1_2/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2 - Copy - Copy"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* WIP",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type == \"microsoft.network/applicationgateways\"\r\n| extend SkuName = tostring(properties.sku.name)\r\n| extend Tier = tostring(properties.sku.tier)\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n\t\t\t//sub name\r\n| project ResourceId = id, Name = name, Type = type, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Zones = zones, SkuName, Tier, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend SubscriptionName = name\r\n| distinct SubscriptionName, subscriptionId\r\n| project SubscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName,SubscriptionId,Name,ResourceId,Type,Location,ResourceGroup, Zones, SkuName, Tier, Criticality",
                      "size": 0,
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "ResourceId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        }
                      }
                    },
                    "name": "query - 4"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "AG"
              },
              "name": "AG"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Azure Firewall](https://azure.microsoft.com/en-us/support/legal/sla/azure-firewall/v1_1/)\r\n* Azure Firewall offers fully stateful native firewall capabilities for Virtual Network resources, with built-in high availability and the ability to scale automatically.\r\n* We guarantee that Azure Firewall will be available at least 99.95% of the time, when deployed within a single Availability Zone.\r\n* We guarantee that Azure Firewall will be available at least 99.99% of the time, when deployed within two or more Availability Zones in the same Azure region.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/azure-firewall/v1_1/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "AF SLA"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* WIP",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type == \"microsoft.network/azurefirewalls\"\r\n| extend SkuName = tostring(properties.sku.name)\r\n| extend Tier = tostring(properties.sku.tier)\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n\t\t\t//sub name\r\n| project ResourceId = id, Name = name, Type = type, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Zones = zones, SkuName, Tier, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend SubscriptionName = name\r\n| distinct SubscriptionName, subscriptionId\r\n| project SubscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName,SubscriptionId,Name,ResourceId,Type,Location,ResourceGroup, Zones, SkuName, Tier, Criticality",
                      "size": 0,
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "ResourceId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        }
                      }
                    },
                    "name": "query - 4"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "AF"
              },
              "name": "AF"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Azure Front Door](https://azure.microsoft.com/en-us/support/legal/sla/frontdoor/v1_0/)\r\n* We guarantee that at least 99.99% of the time Front Door Service will respond to client requests and deliver the requested content without error. We will review and accept data from any commercially reasonable independent measurement system that you choose to monitor your content. You must select a set of agents from the measurement system’s list of standard agents that are generally available and represent at least five geographically diverse locations in major worldwide metropolitan areas (excluding PR of China).\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/frontdoor/v1_0/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "AFD SLA"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* WIP",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type == \"microsoft.network/frontDoors\"\r\n| extend SkuName = tostring(properties.sku.name)\r\n| extend Tier = tostring(properties.sku.tier)\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n\t\t\t//sub name\r\n| project ResourceId = id, Name = name, Type = type, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Zones = zones, SkuName, Tier, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend SubscriptionName = name\r\n| distinct SubscriptionName, subscriptionId\r\n| project SubscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName,SubscriptionId,Name,ResourceId,Type,Location,ResourceGroup, Zones, SkuName, Tier, Criticality",
                      "size": 0,
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "ResourceId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        }
                      }
                    },
                    "name": "query - 4"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "AFD"
              },
              "name": "AFD"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Networking"
        },
        "name": "Networking"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "parameters": [
                  {
                    "id": "100d329a-08a8-4027-85e7-635f580ad68f",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "8d4d4f28-115e-4d89-b6a0-229ed44487b1",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "0414f091-7725-4687-99f1-00e83440db18",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "aa45d66d-d51a-4cbe-bdcf-e2d69414beb7",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 0,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy"
            },
            {
              "type": 11,
              "content": {
                "version": "LinkItem/1.0",
                "style": "tabs",
                "links": [
                  {
                    "id": "bec50763-3978-4739-8e39-ffc849278745",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Virtual Machines",
                    "subTarget": "cVM",
                    "style": "link"
                  },
                  {
                    "id": "c030fefd-838e-4625-9205-9083aa10aa1d",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "App Service - Function App",
                    "subTarget": "cASFA",
                    "style": "link"
                  }
                ]
              },
              "name": "links - 5"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Virtual Machines](https://azure.microsoft.com/en-us/support/legal/sla/virtual-machines/v1_9/)\r\n* For all Virtual Machines that have two or more instances deployed across two or more Availability Zones in the same Azure region, we guarantee you will have Virtual Machine Connectivity to at least one instance at least 99.99% of the time.\r\n* For all Virtual Machines that have two or more instances deployed in the same Availability Set or in the same Dedicated Host Group, we guarantee you will have Virtual Machine Connectivity to at least one instance at least 99.95% of the time.\r\n* For any Single Instance Virtual Machine using Premium SSD or Ultra Disk for all Operating System Disks and Data Disks, we guarantee you will have Virtual Machine Connectivity of at least 99.9%.\r\n* For any Single Instance Virtual Machine using Standard SSD Managed Disks for Operating System Disk and Data Disks, we guarantee you will have Virtual Machine Connectivity of at least 99.5%.\r\n* For any Single Instance Virtual Machine using Standard HDD Managed Disks for Operating System Disks and Data Disks, we guarantee you will have Virtual Machine Connectivity of at least 95%.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/virtual-machines/v1_9/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "> [Virtual machine resilliency checklist](https://docs.microsoft.com/en-us/azure/architecture/checklist/resiliency-per-service#virtual-machines)\r\n* Avoid running a production workload on a single VM. A single VM deployment is not resilient to planned or unplanned maintenance. Instead, put multiple VMs in an availability set or virtual machine scale set, with a load balancer in front.\r\n* Specify an availability set when you provision the VM. Currently, there is no way to add a VM to an availability set after the VM is provisioned. When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer. Otherwise, the load balancer won't route network traffic to that VM.\r\n* Put each application tier into a separate Availability Set. In an N-tier application, don't put VMs from different tiers into the same availability set. VMs in an availability set are placed across fault domains (FDs) and update domains (UD). However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.\r\n* Replicate VMs using Azure Site Recovery. When you replicate Azure VMs using Site Recovery, all the VM disks are continuously replicated to the target region asynchronously. The recovery points are created every few minutes. This gives you a Recovery Point Objective (RPO) in the order of minutes. You can conduct disaster recovery drills as many times as you want, without affecting the production application or the ongoing replication.\r\n* Choose the right VM size based on performance requirements. When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers. Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed. This helps to ensure the application behaves as expected in a cloud environment. Also, if you need multiple NICs, be aware of the NIC limit for each size.\r\n* Use managed disks for VHDs. Managed disks provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure. Also, managed disks aren't subject to the IOPS limits of VHDs created in a storage account.\r\n* Install applications on a data disk, not the OS disk. Otherwise, you may reach the disk size limit.\r\n* Use Azure Backup to back up VMs. Backups protect against accidental data loss.\r\n* Enable diagnostic logs. Include basic health metrics, infrastructure logs, and boot diagnostics. Boot diagnostics can help you diagnose a boot failure if your VM gets into a nonbootable state.\r\n* Configure Azure Monitor. Collect and analyze monitoring data from Azure virtual machines including the guest operating system and the workloads that run in it.\r\n\r\n* Azure Security Center with Azure Defender is required for VM backup information.\r\n* VMs have to be running for disk information to be available.\r\n* VM SLAs apply to both operating system and data disks - only operating system disks are represented in this workbook.",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources\r\n| where type =~ 'microsoft.compute/virtualMachines'\r\n| extend cAvailabilityZone = coalesce(tostring(zones[0]), '0')\r\n| extend cAvailabilitySet = coalesce(extract('/availabilitySets/(.*)', 1, tostring(properties.availabilitySet.id)), '-')\r\n| extend OSDisk_Type = properties.storageProfile.osDisk.managedDisk.storageAccountType\r\n| extend AvailabilityZone = case(cAvailabilityZone == 0, \"Warning\", \r\n                       cAvailabilityZone == 1, \"Configured\", \r\n                       \"Unknown\")\r\n| extend AvailabilitySet = case(cAvailabilitySet == '-', \"Warning\", \r\n                       cAvailabilitySet <> \"-\", \"Configured\", \r\n                       \"Unknown\")\r\n| extend OSDisk_UltraorPremium= case(OSDisk_Type startswith \"Standard\", \"Warning\",\r\n                       OSDisk_Type startswith \"Ultra\", \"Configured\",\r\n\t\t\t\t\t   OSDisk_Type startswith \"Premium\", \"Configured\", \r\n                       \"Unknown\")\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project ResourceId = tolower(tostring(id)), Name = name, AvailabilityZone, AvailabilitySet, OSDisk_UltraorPremium, OSDisk_Type, State = tostring(properties.extended.instanceView.powerState.displayStatus), Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Criticality\r\n| join kind = leftouter (\r\nresources\r\n| where type =~ 'microsoft.compute/virtualMachines'\r\n| project ResourceId = tolower(tostring(id))\r\n| join kind = leftouter (\r\nsecurityresources\r\n| where properties.displayName contains \"Azure Backup should\"\r\n| extend BackupKnown = case((properties.status.code) == \"Unhealthy\", \"Warning\", \r\n\t\t\t\t  (properties.status.code) == \"Healthy\", \"Configured\",\r\n\t\t\t\t  \"Unknown\")\r\n| project ResourceId = tolower(tostring(properties.resourceDetails.Id)), BackupKnown\r\n) on ResourceId\r\n| extend Backup = case(BackupKnown == \"Warning\", \"Warning\", \r\n\t\t\t\t  BackupKnown == \"Configured\", \"Configured\",\r\n\t\t\t\t  \"Unknown\") \r\n| project ResourceId, Backup\r\n) on ResourceId\r\n| project ResourceId, Name, AvailabilityZone, AvailabilitySet, OSDisk_UltraorPremium, OSDisk_Type, Backup, State, Location, ResourceGroup, SubscriptionId, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project Name, State, Location, ResourceGroup, AvailabilityZone, AvailabilitySet, OSDisk_UltraorPremium, OSDisk_Type, Backup, SubscriptionId, SubscriptionName, Criticality, ResourceId\r\n| where Criticality in ({Criticality})",
                      "size": 3,
                      "title": "Virtual Machines",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "State",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "VM running",
                                  "representation": "green",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "VM deallocated",
                                  "representation": "gray",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "AvailabilityZone",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Warning",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Unknown",
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Configured",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "AvailabilitySet",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Warning",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Unknown",
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Configured",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "OSDisk_UltraorPremium",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Configured",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Warning",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "OSDisk_Type",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Backup",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Configured",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Warning",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Criticality",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Mission Critical",
                                  "representation": "redBright",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        },
                        "labelSettings": [
                          {
                            "columnId": "Name"
                          },
                          {
                            "columnId": "State",
                            "label": "Status"
                          },
                          {
                            "columnId": "Location"
                          },
                          {
                            "columnId": "ResourceGroup"
                          },
                          {
                            "columnId": "AvailabilityZone"
                          },
                          {
                            "columnId": "AvailabilitySet"
                          },
                          {
                            "columnId": "OSDisk_UltraorPremium",
                            "label": ""
                          },
                          {
                            "columnId": "OSDisk_Type"
                          },
                          {
                            "columnId": "Backup"
                          },
                          {
                            "columnId": "SubscriptionId"
                          },
                          {
                            "columnId": "SubscriptionName",
                            "label": "Subscription"
                          },
                          {
                            "columnId": "Criticality"
                          },
                          {
                            "columnId": "ResourceId"
                          }
                        ]
                      },
                      "sortBy": []
                    },
                    "name": "VM"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "cVM"
              },
              "name": "cVMsGroup"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for App Service](https://azure.microsoft.com/en-us/support/legal/sla/app-service/v1_4/)\r\n* We guarantee that Apps running in a customer subscription will be available 99.95% of the time. \r\n* No SLA is provided for Apps under either the Free or Shared tiers.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/app-service/v1_4/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2 - Copy - Copy"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* This section lists Function Apps running on an App Service Plan.\r\n* Filter using the subscriptions parameter as required.",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources\r\n| where type == 'microsoft.web/sites'\r\n| extend appServiceEnvironment = iff(properties.hostingEnvironmentId != 'null', extract('hostingEnvironments/([^/]+)', 1, tostring(properties.hostingEnvironmentId)), '')\r\n| extend appServicePlan = extract('serverfarms/([^/]+)', 1, tostring(properties.serverFarmId))\r\n| extend appServicePlanId = properties.serverFarmId\r\n| extend appServiceEnvironmentId = properties.hostingEnvironmentId\r\n| extend sku = tolower(properties.sku)\r\n| extend pricingTier = case(\r\nsku == 'free',\r\n'Free',\r\nsku == 'shared',\r\n'Shared',\r\nsku == 'dynamic',\r\n'Dynamic',\r\nsku == 'isolated',\r\n'Isolated',\r\nsku == 'premiumv2',\r\n'Premium V2',\r\nsku == 'premium',\r\n'Premium',\r\nsku == 'basic',\r\n'Basic',\r\nsku == 'elasticpremium',\r\n'Elastic Premium',\r\nsku == 'premiumv3',\r\n'Premium V3',\r\n'Standard')\r\n| extend state = tolower(properties.state)\r\n| extend status = case(\r\nstate == 'stopped',\r\n'Stopped',\r\nstate == 'running',\r\n'Running',\r\n'Other')\r\n| extend appType = case(\r\nkind contains 'botapp',\r\n'Bot Service',\r\nkind contains 'api',\r\n'Api App',\r\nkind contains 'functionapp' and kind !contains 'workflowapp',\r\n'Function App',\r\nkind contains 'functionapp' and kind contains 'workflowapp',\r\n'Logic App (Preview)',\r\n'Web App')\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project id, status, appType, appServicePlanId, pricingTier, location, subscriptionId, name, resourceGroup, kind, type, tags, appServiceEnvironmentId, Criticality\r\n| where (type !~ ('microsoft.elastic/monitors'))\r\n| where (type !~ ('providers.test/statefulibizaengines'))\r\n| where (type !~ ('microsoft.datacollaboration/workspaces'))\r\n| where (type !~ ('microsoft.securitydetonation/chambers'))\r\n| where (type !~ ('microsoft.azurestack/registrations'))\r\n| where (type !~ ('microsoft.intelligentitdigitaltwin/digitaltwins'))\r\n| where (type !~ ('microsoft.network/networkmanagers'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd2/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd2/vaults'))\r\n| where (type !~ ('microsoft.hybridnetwork/devices'))\r\n| where (type !~ ('microsoft.hybridnetwork/vendors'))\r\n| where (type !~ ('microsoft.hybridnetwork/networkfunctions'))\r\n| where (type !~ ('microsoft.mobilenetwork/accesspoints'))\r\n| where (type !~ ('microsoft.mobilenetwork/enodebs'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobiledevices'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworks'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworksites'))\r\n| where (type !~ ('microsoft.mobilenetwork/packetcores'))\r\n| where (type !~ ('microsoft.mobilenetwork/simprofiles'))\r\n| where (type !~ ('microsoft.connectedcache/cachenodes'))\r\n| where not((type =~ ('microsoft.sql/servers/databases')) and ((kind in~ ('system','v2.0,system','v12.0,system','v12.0,user,datawarehouse,gen2,analytics'))))\r\n| where not((type =~ ('microsoft.sql/servers')) and ((kind =~ ('v12.0,analytics'))))\r\n| project Name = name,Status = status,Tier = pricingTier,AppServicePlanId = appServicePlanId,AppType = appType,ResourceId = id,Type = type,Kind = kind,Location = location,SubscriptionId = subscriptionId,ResourceGroup = resourceGroup, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project Name, Status, Location, ResourceGroup, Tier, AppType, Type, Kind, SubscriptionId, SubscriptionName, Criticality, AppServicePlanId, ResourceId\r\n| where Criticality in ({Criticality})\r\n| where AppType == \"Function App\"",
                      "size": 3,
                      "title": "App Service - Function App",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Status",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Running",
                                  "representation": "green",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Stopped",
                                  "representation": "gray",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Tier",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Free",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "Shared",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "success",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "AppType",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Kind",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Criticality",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Mission Critical",
                                  "representation": "redBright",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        },
                        "labelSettings": [
                          {
                            "columnId": "Name"
                          },
                          {
                            "columnId": "Status"
                          },
                          {
                            "columnId": "Location"
                          },
                          {
                            "columnId": "ResourceGroup"
                          },
                          {
                            "columnId": "Tier"
                          },
                          {
                            "columnId": "AppType"
                          },
                          {
                            "columnId": "Type"
                          },
                          {
                            "columnId": "Kind"
                          },
                          {
                            "columnId": "SubscriptionId"
                          },
                          {
                            "columnId": "SubscriptionName",
                            "label": "Subscription"
                          },
                          {
                            "columnId": "Criticality"
                          },
                          {
                            "columnId": "AppServicePlanId"
                          },
                          {
                            "columnId": "ResourceId"
                          }
                        ]
                      }
                    },
                    "name": "AppServiceFunction"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "cASFA"
              },
              "name": "cASFAGroup"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Compute"
        },
        "name": "Compute"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "parameters": [
                  {
                    "id": "b63203d3-451f-45a0-9d22-ff01dabcf4e5",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "1f01a11d-36a7-4416-a0b3-69ea034ee5db",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "d9dc8d17-6b0b-4b4e-8ad9-db9953f2df9f",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "91622323-6ce2-4c1b-a489-3a13c3adf001",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy"
            },
            {
              "type": 11,
              "content": {
                "version": "LinkItem/1.0",
                "style": "tabs",
                "links": [
                  {
                    "id": "01f0cca4-531d-40e1-ab7f-c04ee0440e5b",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Azure SQL Database",
                    "subTarget": "AzSQL",
                    "style": "link"
                  },
                  {
                    "id": "0df521d5-8d1b-44f0-ba5e-c133d89deb09",
                    "cellValue": "selectedTab",
                    "linkTarget": "parameter",
                    "linkLabel": "Azure Synapse Analytics",
                    "subTarget": "AzSynapse",
                    "style": "link"
                  }
                ]
              },
              "name": "links - 7"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Azure SQL Database](https://azure.microsoft.com/en-us/support/legal/sla/sql-database/v1_5/)\r\n* Azure SQL Database Business Critical or Premium tiers configured as Zone Redundant Deployments have an availability guarantee of at least 99.995%.\r\n* Azure SQL Database Business Critical or Premium tiers not configured for Zone Redundant Deployments, General Purpose, Standard, or Basic tiers, or Hyperscale tier with two or more replicas have an availability guarantee of at least 99.99%.\r\n* Azure SQL Database Hyperscale tier with one replica has an availability guarantee of at least 99.95% and 99.9% for zero replicas.\r\n* Azure SQL Database Business Critical tier configured with geo-replication has a guarantee of Recovery point objective (RPO) of 5 sec for 100% of deployed hours.\r\n* Azure SQL Database Business Critical tier configured with geo-replication has a guarantee of Recovery time objective (RTO) of 30 sec for 100% of deployed hours.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/sql-database/v1_5/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2 - Copy"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* Standard and Premium tiers provide a longer point-in-time restore period (35 days).\r\n* Enable SQL Database auditing. Auditing can be used to diagnose malicious attacks or human error.\r\n* Use Active Geo-Replication to create a readable secondary in a different region. If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database. Until you fail over, the secondary database remains read-only.\r\n* Consider using sharding to partition the database horizontally. Sharding can provide fault isolation.\r\n* Use point-in-time restore to recover from human error.\r\n* Use geo-restore to recover from a service outage. Geo-restore restores a database from a geo-redundant backup.",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type =~ 'microsoft.sql/servers/databases'\r\n| extend Tier = sku.tier\r\n| where Tier <> \"DataWarehouse\"\r\n| extend StorageAccountType = properties.storageAccountType\r\n| extend DefaultSecondaryLocation = properties.defaultSecondaryLocation\r\n| extend ReadReplicaCount = properties.readReplicaCount\r\n| extend ZoneRedundant = properties.zoneRedundant\r\n| extend Status = properties.status\r\n| extend Endpoint = properties.fullyQualifiedDomainName\r\n| extend maxSizeGB = todouble(properties.maxSizeBytes)\r\n| extend maxSizeGB = iif(type has 'SQL DBs', maxSizeGB /1000 /1000, maxSizeGB)\r\n| extend Details = pack_all()\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project Name = name, ResourceId = id, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Type = type, Tier, StorageAccountType, DefaultSecondaryLocation, ReadReplicaCount, ZoneRedundant, Status, Endpoint, maxSizeGB, Details, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName, SubscriptionId, Name, Status, Location, tostring(DefaultSecondaryLocation), ResourceGroup, Type, Tier, StorageAccountType, ReadReplicaCount, ZoneRedundant, Endpoint, maxSizeGB, Details, Criticality, ResourceId\r\n| where Criticality in ({Criticality})",
                      "size": 3,
                      "title": "Azure SQL Database",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Status",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Online",
                                  "representation": "green",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "gray",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Tier",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Premium",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "BusinessCritical",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "DataWarehouse",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "2",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "StorageAccountType",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "GRS",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "ReadReplicaCount",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "0",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": ">",
                                  "thresholdValue": "0",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "ZoneRedundant",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "false",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": ">",
                                  "thresholdValue": "true",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Endpoint",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "maxSizeGB",
                            "formatter": 0,
                            "numberFormat": {
                              "unit": 5,
                              "options": {
                                "style": "decimal",
                                "useGrouping": false
                              }
                            }
                          },
                          {
                            "columnMatch": "Details",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Criticality",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Mission Critical",
                                  "representation": "redBright",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        },
                        "labelSettings": [
                          {
                            "columnId": "SubscriptionName",
                            "label": "Subscription"
                          },
                          {
                            "columnId": "SubscriptionId"
                          },
                          {
                            "columnId": "Name"
                          },
                          {
                            "columnId": "Status"
                          },
                          {
                            "columnId": "Location"
                          },
                          {
                            "columnId": "DefaultSecondaryLocation",
                            "label": "SecondaryLocation"
                          },
                          {
                            "columnId": "ResourceGroup"
                          },
                          {
                            "columnId": "Type"
                          },
                          {
                            "columnId": "Tier"
                          },
                          {
                            "columnId": "StorageAccountType"
                          },
                          {
                            "columnId": "ReadReplicaCount"
                          },
                          {
                            "columnId": "ZoneRedundant"
                          },
                          {
                            "columnId": "Endpoint"
                          },
                          {
                            "columnId": "maxSizeGB",
                            "label": "MaxSize"
                          },
                          {
                            "columnId": "Details"
                          },
                          {
                            "columnId": "Criticality"
                          },
                          {
                            "columnId": "ResourceId"
                          }
                        ]
                      }
                    },
                    "name": "AzureSQL"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "AzSQL"
              },
              "name": "AzSQL"
            },
            {
              "type": 12,
              "content": {
                "version": "NotebookGroup/1.0",
                "groupType": "editable",
                "items": [
                  {
                    "type": 1,
                    "content": {
                      "json": "[SLA for Azure Synapse Analytics (formerly Azure SQL Data Warehouse)](https://azure.microsoft.com/en-us/support/legal/sla/synapse-analytics/v1_0/)\r\n* We guarantee that, at least 99.9% of the time client operations executed on a Synapse Analytics database will succeed.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/synapse-analytics/v1_0/)",
                      "style": "upsell"
                    },
                    "conditionalVisibility": {
                      "parameterName": "SLA",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 2 - Copy - Copy"
                  },
                  {
                    "type": 1,
                    "content": {
                      "json": "* It is recommended to keep the geo-backup feature enabled. By default, Synapse Analytics takes a full backup of your data every 24 hours for disaster recovery.",
                      "style": "info"
                    },
                    "conditionalVisibility": {
                      "parameterName": "Help",
                      "comparison": "isEqualTo",
                      "value": "Yes"
                    },
                    "name": "text - 3 - Copy - Copy"
                  },
                  {
                    "type": 3,
                    "content": {
                      "version": "KqlItem/1.0",
                      "query": "resources \r\n| where type =~ 'microsoft.sql/servers/databases'\r\n| extend Tier = sku.tier\r\n| where Tier == \"DataWarehouse\"\r\n| extend StorageAccountType = properties.storageAccountType\r\n| extend DefaultSecondaryLocation = properties.defaultSecondaryLocation\r\n| extend ReadReplicaCount = properties.readReplicaCount\r\n| extend ZoneRedundant = properties.zoneRedundant\r\n| extend Status = properties.status\r\n| extend Endpoint = properties.fullyQualifiedDomainName\r\n| extend maxSizeGB = todouble(properties.maxSizeBytes)\r\n| extend maxSizeGB = iif(type has 'SQL DBs', maxSizeGB /1000 /1000, maxSizeGB)\r\n| extend Details = pack_all()\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project Name = name, ResourceId = id, Location = location, ResourceGroup = resourceGroup, SubscriptionId = subscriptionId, Type = type, Tier, StorageAccountType, DefaultSecondaryLocation, ReadReplicaCount, ZoneRedundant, Status, Endpoint, maxSizeGB, Details, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName, SubscriptionId, Name, Status, Location, tostring(DefaultSecondaryLocation), ResourceGroup, Type, Tier, StorageAccountType, ReadReplicaCount, ZoneRedundant, Endpoint, maxSizeGB, Details, Criticality, ResourceId\r\n| where Criticality in ({Criticality})",
                      "size": 3,
                      "title": "Azure Synapse Analytics",
                      "queryType": 1,
                      "resourceType": "microsoft.resourcegraph/resources",
                      "crossComponentResources": [
                        "{Subscriptions}"
                      ],
                      "gridSettings": {
                        "formatters": [
                          {
                            "columnMatch": "SubscriptionName",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "SubscriptionId",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Name",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Status",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Online",
                                  "representation": "green",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "gray",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Type",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Tier",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Premium",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "BusinessCritical",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "==",
                                  "thresholdValue": "DataWarehouse",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "2",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "StorageAccountType",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "GRS",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "ReadReplicaCount",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "0",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": ">",
                                  "thresholdValue": "0",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "ZoneRedundant",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "icons",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "false",
                                  "representation": "2",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": ">",
                                  "thresholdValue": "true",
                                  "representation": "success",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "representation": "unknown",
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          },
                          {
                            "columnMatch": "Endpoint",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "maxSizeGB",
                            "formatter": 0,
                            "numberFormat": {
                              "unit": 5,
                              "options": {
                                "style": "decimal",
                                "useGrouping": false
                              }
                            }
                          },
                          {
                            "columnMatch": "Details",
                            "formatter": 5
                          },
                          {
                            "columnMatch": "Criticality",
                            "formatter": 18,
                            "formatOptions": {
                              "thresholdsOptions": "colors",
                              "thresholdsGrid": [
                                {
                                  "operator": "==",
                                  "thresholdValue": "Mission Critical",
                                  "representation": "redBright",
                                  "text": "{0}{1}"
                                },
                                {
                                  "operator": "Default",
                                  "thresholdValue": null,
                                  "text": "{0}{1}"
                                }
                              ]
                            }
                          }
                        ],
                        "hierarchySettings": {
                          "treeType": 1,
                          "groupBy": [
                            "SubscriptionName"
                          ],
                          "expandTopLevel": true,
                          "finalBy": "Name"
                        },
                        "labelSettings": [
                          {
                            "columnId": "SubscriptionName",
                            "label": "Subscription"
                          },
                          {
                            "columnId": "SubscriptionId"
                          },
                          {
                            "columnId": "Name"
                          },
                          {
                            "columnId": "Status"
                          },
                          {
                            "columnId": "Location"
                          },
                          {
                            "columnId": "DefaultSecondaryLocation",
                            "label": "SecondaryLocation"
                          },
                          {
                            "columnId": "ResourceGroup"
                          },
                          {
                            "columnId": "Type"
                          },
                          {
                            "columnId": "Tier"
                          },
                          {
                            "columnId": "StorageAccountType"
                          },
                          {
                            "columnId": "ReadReplicaCount"
                          },
                          {
                            "columnId": "ZoneRedundant"
                          },
                          {
                            "columnId": "Endpoint"
                          },
                          {
                            "columnId": "maxSizeGB",
                            "label": "MaxSize"
                          },
                          {
                            "columnId": "Details"
                          },
                          {
                            "columnId": "Criticality"
                          },
                          {
                            "columnId": "ResourceId"
                          }
                        ]
                      }
                    },
                    "name": "Synapse"
                  }
                ]
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "AzSynapse"
              },
              "name": "AzSynapse"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Databases"
        },
        "name": "Databases"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "value::all"
                ],
                "parameters": [
                  {
                    "id": "60168909-7ce4-46d4-86eb-df56b6f7a949",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscription",
                    "type": 6,
                    "description": "List only subscriptions with microsoft.containerservice/managedclusters resource types.",
                    "isRequired": true,
                    "value": "/subscriptions/5733bcb3-7fde-4caf-8629-41dc15e3b352",
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::1"
                  },
                  {
                    "id": "e63069af-5126-43a5-8ec4-b07935d3cded",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "2154212d-f81c-4b8e-931a-bf7d82215046",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "ContainersParam"
            },
            {
              "type": 1,
              "content": {
                "json": "[SLA for Azure Kubernetes Service (AKS)](https://azure.microsoft.com/en-us/support/legal/sla/kubernetes-service/v1_1/)\r\n* For customers who have purchased an Azure Kubernetes Service (AKS) Uptime SLA, we guarantee uptime of 99.95% for the Kubernetes API Server for AKS Clusters that use Azure Availability Zone and 99.9% for AKS Clusters that do not use Azure Availability Zone.\r\n* The availability of the agent nodes in your AKS Cluster is covered by the Virtual Machines SLA. Please see the [Virtual Machines SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) for more details.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/kubernetes-service/v1_1/)",
                "style": "upsell"
              },
              "conditionalVisibility": {
                "parameterName": "SLA",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 3"
            },
            {
              "type": 1,
              "content": {
                "json": "* An Azure Kubernetes Service (AKS) cluster distributes resources such as nodes and storage across logical sections of underlying Azure infrastructure. This deployment model when using availability zones, ensures nodes in a given availability zone are physically separated from those defined in another availability zone. AKS clusters deployed with multiple availability zones configured across a cluster provide a higher level of availability to protect against a hardware failure or a planned maintenance event.\r\n* By defining node pools in a cluster to span multiple zones, nodes in a given node pool are able to continue operating even if a single zone has gone down. Your applications can continue to be available even if there is a physical failure in a single datacenter if orchestrated to tolerate failure of a subset of nodes.\r\n* You can only define availability zones when the cluster or node pool is created.\r\nAvailability zone settings can't be updated after the cluster is created. You also can't update an existing, non-availability zone cluster to use availability zones.\r\n* The chosen node size (VM SKU) selected must be available across all availability zones selected.\r\n* Clusters with availability zones enabled require use of Azure Standard Load Balancers for distribution across zones. This load balancer type can only be defined at cluster create time.",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "Help"
            },
            {
              "type": 3,
              "content": {
                "version": "KqlItem/1.0",
                "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[],\"method\":\"GET\",\"path\":\"/subscriptions/{Subscription:Id}/providers/Microsoft.ContainerService/managedClusters\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2020-09-01\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value[*]\",\"columns\":[{\"path\":\"$.name\",\"columnid\":\"Name\"},{\"path\":\"$.properties.powerState.code\",\"columnid\":\"Status\"},{\"path\":\"$.location\",\"columnid\":\"Location\"},{\"path\":\"$.properties.kubernetesVersion\",\"columnid\":\"KubernetesVersion\"},{\"path\":\"$.properties.agentPoolProfiles[*].name\",\"columnid\":\"NodeName\"},{\"path\":\"$.properties.agentPoolProfiles[*].availabilityZones\",\"columnid\":\"AvailabilityZones\"},{\"path\":\"$.properties.networkProfile.loadBalancerSku\",\"columnid\":\"LoadBalancerSku\"},{\"path\":\"$.id\",\"columnid\":\"ResourceId\"}]}}]}",
                "size": 0,
                "title": "Azure Kubernetes Service (AKS)",
                "queryType": 12,
                "gridSettings": {
                  "formatters": [
                    {
                      "columnMatch": "Status",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "colors",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Running",
                            "representation": "green",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "gray",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "AvailabilityZones",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "is Empty",
                            "representation": "2",
                            "text": "Warning"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "success",
                            "text": "Configured"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "LoadBalancerSku",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Basic",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Standard",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "unknown",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              "name": "AKS"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Containers"
        },
        "name": "Containers"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "parameters": [
                  {
                    "id": "d2db1bc8-6a24-4222-8553-a5651dd88e27",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "d55bef3f-b2f7-4b63-803e-5d169cb1d2a2",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "e396ce5d-22f2-4e08-9079-d3732ff0ff62",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "8b2b1f5e-f40b-4a13-b189-c02a4a8f55a6",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "[SLA for Storage Accounts](https://azure.microsoft.com/en-us/support/legal/sla/storage/v1_5/)\r\n* We guarantee that at least 99.99% (99.9% for Cool Access Tier) of the time, we will successfully process requests to read data from Read Access-Geo Redundant Storage (RA-GRS) Accounts, provided that failed attempts to read data from the primary region are retried on the secondary region.\r\n* We guarantee that at least 99.9% (99% for Cool Access Tier) of the time, we will successfully process requests to read data from Locally Redundant Storage (LRS), Zone Redundant Storage (ZRS), and Geo Redundant Storage (GRS) Accounts.\r\n* We guarantee that at least 99.9% (99% for Cool Access Tier) of the time, we will successfully process requests to write data to Locally Redundant Storage (LRS), Zone Redundant Storage (ZRS), and Geo Redundant Storage (GRS) Accounts and Read Access-Geo Redundant Storage (RA-GRS) Accounts.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/storage/v1_5/)",
                "style": "upsell"
              },
              "conditionalVisibility": {
                "parameterName": "SLA",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 2 - Copy - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "> * For application data, use read-access geo-redundant storage (RA-GRS). RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region. If there is a storage outage in the primary region, the application can read the data from the secondary region.\r\n* For VM disks, use managed disks. Managed disks provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure. Also, managed disks aren't subject to the IOPS limits of VHDs created in a storage account.\r\n* For Queue storage, create a backup queue in another region. For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items. Instead, create a backup queue in a storage account in another region. If there is a storage outage, the application can use the backup queue, until the primary region becomes available again. That way, the application can still process new requests",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 3 - Copy - Copy"
            },
            {
              "type": 3,
              "content": {
                "version": "KqlItem/1.0",
                "query": "resources\r\n| where type =~ \"microsoft.storage/storageaccounts\" or type =~ \"microsoft.classicstorage/storageaccounts\"\r\n| extend isStorageV2 = iff(type =~ \"microsoft.storage/storageaccounts\", true, false)\r\n| extend SkuName = replace('-', '_', tostring(iff(isStorageV2, sku.name, properties.accountType)))\r\n| extend replicationCode = split(SkuName, '_', 1)[0]\r\n| extend ReplicationType = case(replicationCode =~ \"lrs\", 'Locally-redundant storage (LRS)', \r\n                                replicationCode =~ \"zrs\", 'Zone-redundant storage (ZRS)',\r\n                                replicationCode =~ \"grs\", 'Geo-redundant storage (GRS)',\r\n                                replicationCode =~ \"ragrs\", 'Read-access geo-redundant storage (RA-GRS)',\r\n                                replicationCode =~ \"gzrs\", 'Geo-zone-redundant storage (GZRS)',\r\n                                replicationCode =~ \"ragzrs\", 'Read-access geo-zone-redundant storage (RA-GZRS)',\r\n                                coalesce(replicationCode, '-'))\r\n| extend Created = tostring(properties.creationTime)\r\n| extend AccessTier = tostring(iff(isStorageV2, coalesce(properties.accessTier, '-'), '-'))\r\n| extend primaryStatus = iff(isStorageV2, properties.statusOfPrimary, properties.statusOfPrimaryRegion)\r\n| extend PrimaryStatus = case(primaryStatus =~ \"available\", 'Available',\r\n                              primaryStatus =~ \"unavailable\", 'Unavailable',\r\n                              coalesce(primaryStatus, '-'))\r\n| extend secondaryStatus = iff(isStorageV2, properties.statusOfSecondary, properties.statusOfSecondaryRegion)\r\n| extend SecondaryStatus = case(secondaryStatus =~ \"available\", 'Available',\r\n                              secondaryStatus =~ \"unavailable\", 'Unavailable',\r\n                              coalesce(secondaryStatus, '-'))\r\n| extend provisioningState = properties.provisioningState\r\n| extend ProvisioningState = case(provisioningState =~ \"creating\", 'Creating',\r\n                                  provisioningState =~ \"resolvingdns\", 'ResolvingDNS',\r\n                                  provisioningState =~ \"succeeded\", 'Succeeded',\r\n                                  provisioningState =~ \"deleting\", 'Deleting',\r\n                                  coalesce(provisioningState, '-'))\r\n| extend PrimaryLocation = tostring(iff(isStorageV2, properties.primaryLocation, properties.geoPrimaryRegion))\r\n| extend SecondaryLocation = case(isnotempty(tostring(iff(isStorageV2, properties.secondaryLocation, properties.geoSecondaryRegion))), tostring(iff(isStorageV2, properties.secondaryLocation, properties.geoSecondaryRegion)),\r\n\t\t\t\t\t\t\t\t  isempty(tostring(iff(isStorageV2, properties.secondaryLocation, properties.geoSecondaryRegion))), '-',\r\n\t\t\t\t\t\t\t\t   '-')\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project ResourceId = id, name, type, location, subscriptionId, resourceGroup, kind, tags, SkuName, ReplicationType, Created, AccessTier, PrimaryLocation, PrimaryStatus, SecondaryLocation, SecondaryStatus, ProvisioningState, Criticality\r\n| extend typeDisplayName=case(type =~ 'microsoft.storage/storageaccounts','Storage account',type)\r\n| where (type !~ ('microsoft.elastic/monitors'))\r\n| where (type !~ ('providers.test/statefulibizaengines'))\r\n| where (type !~ ('microsoft.datacollaboration/workspaces'))\r\n| where (type !~ ('microsoft.securitydetonation/chambers'))\r\n| where (type !~ ('microsoft.azurestack/registrations'))\r\n| where (type !~ ('microsoft.intelligentitdigitaltwin/digitaltwins'))\r\n| where (type !~ ('microsoft.network/networkmanagers'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd2/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd2/vaults'))\r\n| where (type !~ ('microsoft.hybridnetwork/devices'))\r\n| where (type !~ ('microsoft.hybridnetwork/vendors'))\r\n| where (type !~ ('microsoft.hybridnetwork/networkfunctions'))\r\n| where (type !~ ('microsoft.mobilenetwork/accesspoints'))\r\n| where (type !~ ('microsoft.mobilenetwork/enodebs'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobiledevices'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworks'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworksites'))\r\n| where (type !~ ('microsoft.mobilenetwork/packetcores'))\r\n| where (type !~ ('microsoft.mobilenetwork/simprofiles'))\r\n| where (type !~ ('microsoft.connectedcache/cachenodes'))\r\n| where not((type =~ ('microsoft.sql/servers/databases')) and ((kind in~ ('system','v2.0,system','v12.0,system','v12.0,user,datawarehouse,gen2,analytics'))))\r\n| where not((type =~ ('microsoft.sql/servers')) and ((kind =~ ('v12.0,analytics'))))\r\n| project Name = name,ResourceId,typeDisplayName,Kind = kind,ResourceGroup = resourceGroup,Location = location,SubscriptionId = subscriptionId,SecondaryStatus,AccessTier,ReplicationType,SecondaryLocation,SkuName,type,Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project SubscriptionName, Name, Kind, Location, SecondaryLocation, ResourceGroup, typeDisplayName, SubscriptionId, SecondaryStatus, AccessTier, ReplicationType, SkuName, type, Criticality, ResourceId\r\n| where Criticality in ({Criticality})",
                "size": 3,
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "gridSettings": {
                  "formatters": [
                    {
                      "columnMatch": "SubscriptionName",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Name",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "SecondaryLocation",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "-",
                            "representation": "2",
                            "text": "Warning"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "success",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "SubscriptionId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "SecondaryStatus",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Available",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "2",
                            "text": "Warning"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "AccessTier",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Hot",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "2",
                            "text": "Warning"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "ReplicationType",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "contains",
                            "thresholdValue": "RA-GRS",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "contains",
                            "thresholdValue": "GRS",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "contains",
                            "thresholdValue": "ZRS",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "2",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "SkuName",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "type",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Criticality",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "colors",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Mission Critical",
                            "representation": "redBright",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    }
                  ],
                  "hierarchySettings": {
                    "treeType": 1,
                    "groupBy": [
                      "SubscriptionName"
                    ],
                    "expandTopLevel": true,
                    "finalBy": "Name"
                  },
                  "labelSettings": [
                    {
                      "columnId": "SubscriptionName",
                      "label": "Subscription"
                    },
                    {
                      "columnId": "Name"
                    },
                    {
                      "columnId": "Kind"
                    },
                    {
                      "columnId": "Location"
                    },
                    {
                      "columnId": "SecondaryLocation"
                    },
                    {
                      "columnId": "ResourceGroup"
                    },
                    {
                      "columnId": "typeDisplayName"
                    },
                    {
                      "columnId": "SubscriptionId"
                    },
                    {
                      "columnId": "SecondaryStatus"
                    },
                    {
                      "columnId": "AccessTier"
                    },
                    {
                      "columnId": "ReplicationType"
                    },
                    {
                      "columnId": "SkuName"
                    },
                    {
                      "columnId": "type"
                    },
                    {
                      "columnId": "Criticality"
                    },
                    {
                      "columnId": "ResourceId"
                    }
                  ]
                }
              },
              "conditionalVisibility": {
                "parameterName": "selectedTab",
                "comparison": "isEqualTo",
                "value": "Storage"
              },
              "name": "query - 5"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Storage"
        },
        "name": "Storage"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "parameters": [
                  {
                    "id": "53c4869e-fe5f-4d92-99ec-fb784580a576",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "24e0a66f-1672-46c0-9ee0-efda089b3272",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "253ea690-4b1f-476d-972f-f3db5588e4e3",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "e42b8b91-3a81-4285-9cb1-833bfad1bac7",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "[SLA for App Service](https://azure.microsoft.com/en-us/support/legal/sla/app-service/v1_4/)\r\n* We guarantee that Apps running in a customer subscription will be available 99.95% of the time. \r\n* No SLA is provided for Apps under either the Free or Shared tiers.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/app-service/v1_4/)",
                "style": "upsell"
              },
              "conditionalVisibility": {
                "parameterName": "SLA",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 2 - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "> * Use Standard or Premium tier. These tiers support staging slots and automated backups.\r\n* Avoid scaling up or down. Instead, select a tier and instance size that meet your performance requirements under typical load, and then scale out the instances to handle changes in traffic volume. Scaling up and down may trigger an application restart.\r\n* Store configuration as app settings. Use app settings to hold configuration settings as app settings. Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.\r\n* Create separate App Service plans for production and test. Don't use slots on your production deployment for testing. All apps within the same App Service plan share the same VM instances. If you put production and test deployments in the same plan, it can negatively affect the production deployment. For example, load tests might degrade the live production site. By putting test deployments into a separate plan, you isolate them from the production version.\r\n* Separate web apps from web APIs. If your solution has both a web front end and a web API, consider decomposing them into separate App Service apps. This design makes it easier to decompose the solution by workload. You can run the web app and the API in separate App Service plans, so they can be scaled independently. If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.\r\n* Avoid using the App Service backup feature to back up Azure SQL databases. Instead, use SQL Database automated backups. App Service backup exports the database to a SQL BACPAC file, which costs DTUs.\r\n* Deploy to a staging slot. Create a deployment slot for staging. Deploy application updates to the staging slot, and verify the deployment before swapping it into production. This reduces the chance of a bad update in production. It also ensures that all instances are warmed up before being swapped into production. Many applications have a significant warmup and cold-start time.\r\n* Create a deployment slot to hold the last-known-good (LKG) deployment. When you deploy an update to production, move the previous production deployment into the LKG slot. This makes it easier to roll back a bad deployment. If you discover a problem later, you can quickly revert to the LKG version.\r\n* Enable diagnostics logging, including application logging and web server logging. Logging is important for monitoring and diagnostics.\r\n* Log to blob storage. This makes it easier to collect and analyze the data.\r\n* Create a separate storage account for logs. Don't use the same storage account for logs and application data. This helps to prevent logging from reducing application performance.\r\n* Monitor performance. Use a performance monitoring service such as Application Insights to monitor application performance and behavior under load. Performance monitoring gives you real-time insight into the application. It enables you to diagnose issues and perform root-cause analysis of failures.",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 3 - Copy"
            },
            {
              "type": 3,
              "content": {
                "version": "KqlItem/1.0",
                "query": "resources\r\n| where type == 'microsoft.web/sites'\r\n| extend appServiceEnvironment = iff(properties.hostingEnvironmentId != 'null', extract('hostingEnvironments/([^/]+)', 1, tostring(properties.hostingEnvironmentId)), '')\r\n| extend appServicePlan = extract('serverfarms/([^/]+)', 1, tostring(properties.serverFarmId))\r\n| extend appServicePlanId = properties.serverFarmId\r\n| extend appServiceEnvironmentId = properties.hostingEnvironmentId\r\n| extend sku = tolower(properties.sku)\r\n| extend pricingTier = case(\r\nsku == 'free',\r\n'Free',\r\nsku == 'shared',\r\n'Shared',\r\nsku == 'dynamic',\r\n'Dynamic',\r\nsku == 'isolated',\r\n'Isolated',\r\nsku == 'premiumv2',\r\n'Premium V2',\r\nsku == 'premium',\r\n'Premium',\r\nsku == 'basic',\r\n'Basic',\r\nsku == 'elasticpremium',\r\n'Elastic Premium',\r\nsku == 'premiumv3',\r\n'Premium V3',\r\n'Standard')\r\n| extend state = tolower(properties.state)\r\n| extend status = case(\r\nstate == 'stopped',\r\n'Stopped',\r\nstate == 'running',\r\n'Running',\r\n'Other')\r\n| extend appType = case(\r\nkind contains 'botapp',\r\n'Bot Service',\r\nkind contains 'api',\r\n'Api App',\r\nkind contains 'functionapp' and kind !contains 'workflowapp',\r\n'Function App',\r\nkind contains 'functionapp' and kind contains 'workflowapp',\r\n'Logic App (Preview)',\r\n'Web App')\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| project id, status, appType, appServicePlanId, pricingTier, location, subscriptionId, name, resourceGroup, kind, type, tags, appServiceEnvironmentId, Criticality\r\n| where (type !~ ('microsoft.elastic/monitors'))\r\n| where (type !~ ('providers.test/statefulibizaengines'))\r\n| where (type !~ ('microsoft.datacollaboration/workspaces'))\r\n| where (type !~ ('microsoft.securitydetonation/chambers'))\r\n| where (type !~ ('microsoft.azurestack/registrations'))\r\n| where (type !~ ('microsoft.intelligentitdigitaltwin/digitaltwins'))\r\n| where (type !~ ('microsoft.network/networkmanagers'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd2/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesbvtd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd/vaults'))\r\n| where (type !~ ('microsoft.recoveryservicesintd2/vaults'))\r\n| where (type !~ ('microsoft.hybridnetwork/devices'))\r\n| where (type !~ ('microsoft.hybridnetwork/vendors'))\r\n| where (type !~ ('microsoft.hybridnetwork/networkfunctions'))\r\n| where (type !~ ('microsoft.mobilenetwork/accesspoints'))\r\n| where (type !~ ('microsoft.mobilenetwork/enodebs'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobiledevices'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworks'))\r\n| where (type !~ ('microsoft.mobilenetwork/mobilenetworksites'))\r\n| where (type !~ ('microsoft.mobilenetwork/packetcores'))\r\n| where (type !~ ('microsoft.mobilenetwork/simprofiles'))\r\n| where (type !~ ('microsoft.connectedcache/cachenodes'))\r\n| where not((type =~ ('microsoft.sql/servers/databases')) and ((kind in~ ('system','v2.0,system','v12.0,system','v12.0,user,datawarehouse,gen2,analytics'))))\r\n| where not((type =~ ('microsoft.sql/servers')) and ((kind =~ ('v12.0,analytics'))))\r\n| project Name = name,Status = status,Tier = pricingTier,AppServicePlanId = appServicePlanId,AppType = appType,ResourceId = id,Type = type,Kind = kind,Location = location,SubscriptionId = subscriptionId,ResourceGroup = resourceGroup, Criticality\r\n| join kind = leftouter (resourcecontainers\r\n| where type == 'microsoft.resources/subscriptions'\r\n| extend subscriptionName = name\r\n| distinct subscriptionName, subscriptionId\r\n| project SubscriptionName = subscriptionName, SubscriptionId = subscriptionId) on SubscriptionId\r\n| project Name, Status, Location, ResourceGroup, Tier, AppType, Type, Kind, SubscriptionId, SubscriptionName, Criticality, AppServicePlanId, ResourceId\r\n| where Criticality in ({Criticality})\r\n| where AppType == \"Web App\"",
                "size": 3,
                "title": "App Service - Web App",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "gridSettings": {
                  "formatters": [
                    {
                      "columnMatch": "Name",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Status",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "colors",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Running",
                            "representation": "green",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Stopped",
                            "representation": "gray",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "Tier",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Free",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Shared",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "success",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "AppType",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Type",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Kind",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "SubscriptionId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "SubscriptionName",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "Criticality",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "colors",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Mission Critical",
                            "representation": "redBright",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    }
                  ],
                  "hierarchySettings": {
                    "treeType": 1,
                    "groupBy": [
                      "SubscriptionName"
                    ],
                    "expandTopLevel": true,
                    "finalBy": "Name"
                  },
                  "labelSettings": [
                    {
                      "columnId": "Name"
                    },
                    {
                      "columnId": "Status"
                    },
                    {
                      "columnId": "Location"
                    },
                    {
                      "columnId": "ResourceGroup"
                    },
                    {
                      "columnId": "Tier"
                    },
                    {
                      "columnId": "AppType"
                    },
                    {
                      "columnId": "Type"
                    },
                    {
                      "columnId": "Kind"
                    },
                    {
                      "columnId": "SubscriptionId"
                    },
                    {
                      "columnId": "SubscriptionName",
                      "label": "Subscription"
                    },
                    {
                      "columnId": "Criticality"
                    },
                    {
                      "columnId": "AppServicePlanId"
                    },
                    {
                      "columnId": "ResourceId"
                    }
                  ]
                }
              },
              "name": "query - 2"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Web"
        },
        "name": "Web"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "crossComponentResources": [
                  "{Subscriptions}"
                ],
                "parameters": [
                  {
                    "id": "e674bfa2-0e16-4ee3-9f6f-0d01d8347241",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscriptions",
                    "type": 6,
                    "isRequired": true,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::all"
                  },
                  {
                    "id": "ae637451-d4ac-43e6-bcc7-9a0705878bc8",
                    "version": "KqlParameterItem/1.0",
                    "name": "Criticality",
                    "type": 2,
                    "multiSelect": true,
                    "quote": "'",
                    "delimiter": ",",
                    "query": "resources\r\n| extend Criticality = case(tags.Criticality <> \"\", tags.Criticality,\r\n\t\t    \"Undefined\")\r\n| distinct Criticality",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "value": [
                      "value::all"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [
                        "value::all"
                      ],
                      "showDefault": false
                    },
                    "defaultValue": "value::all",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "b3f445bb-65c7-45da-ae8a-dcfd2a90ee83",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  },
                  {
                    "id": "53b645ef-7b95-461b-a947-208de6da0f26",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 1,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "[SLA for API Management](https://azure.microsoft.com/en-us/support/legal/sla/api-management/v1_4/)\r\n* We guarantee that API Management Service instances running in the Consumption Tier, Basic Tier, Standard Tier, and Premium Tier deployments scaled within a single region will respond to requests to perform operations at least 99.95% of the time.\r\n* We guarantee that API Management Service instances running in the Premium Tier with deployments scaled across two or more regions will respond to requests to perform operations at least 99.99% of the time.\r\n* No SLA is provided for the following:​\r\n * Developer tier of the API Management Service.\r\n * Any self-hosted API Management components.​\r\n \r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/api-management/v1_4/)",
                "style": "upsell"
              },
              "conditionalVisibility": {
                "parameterName": "SLA",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 2 - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "* WIP",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "text - 3 - Copy - Copy"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Integration"
        },
        "name": "Integration"
      },
      {
        "type": 12,
        "content": {
          "version": "NotebookGroup/1.0",
          "groupType": "editable",
          "items": [
            {
              "type": 9,
              "content": {
                "version": "KqlParameterItem/1.0",
                "parameters": [
                  {
                    "id": "371c6c5b-70bb-48a8-9500-6abbc879ae04",
                    "version": "KqlParameterItem/1.0",
                    "name": "Subscription",
                    "type": 6,
                    "description": "Lists all subscriptions.",
                    "isRequired": true,
                    "value": "/subscriptions/5733bcb3-7fde-4caf-8629-41dc15e3b352",
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "includeAll": true,
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::1"
                  },
                  {
                    "id": "f2436b2c-180c-4fbe-bd17-e8120e9ae9c4",
                    "version": "KqlParameterItem/1.0",
                    "name": "Vault",
                    "type": 2,
                    "isRequired": true,
                    "query": "resources \r\n| where type == \"microsoft.recoveryservices/vaults\"\r\n| project name",
                    "crossComponentResources": [
                      "{Subscription}"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::1",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "824f087f-59b2-49cb-93a2-ae89397f125f",
                    "version": "KqlParameterItem/1.0",
                    "name": "ResourceGroup",
                    "label": "Resource Group",
                    "type": 2,
                    "isRequired": true,
                    "query": "resources \r\n| where type == \"microsoft.recoveryservices/vaults\"\r\n| where name == \"{Vault}\"\r\n| project resourceGroup",
                    "crossComponentResources": [
                      "{Subscription}"
                    ],
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "defaultValue": "value::1",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources"
                  },
                  {
                    "id": "f46c904e-7777-498a-bcc3-f3340204ee71",
                    "version": "KqlParameterItem/1.0",
                    "name": "SLA",
                    "label": "Show SLA",
                    "type": 10,
                    "description": "This will show the SLA information for the focus area.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    }
                  },
                  {
                    "id": "84fff300-b04a-4ef7-965c-8fcf0da7ac36",
                    "version": "KqlParameterItem/1.0",
                    "name": "Help",
                    "label": "Show Help",
                    "type": 10,
                    "description": "This will show additional information, and any prerequisites that may apply to the workbook.",
                    "isRequired": true,
                    "typeSettings": {
                      "additionalResourceOptions": [],
                      "showDefault": false
                    },
                    "jsonData": "[{ \"value\": \"Yes\", \"label\": \"Yes\"},\r\n {\"value\": \"No\", \"label\": \"No\", \"selected\":true }]",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "value": "Yes"
                  }
                ],
                "style": "pills",
                "queryType": 0,
                "resourceType": "microsoft.resourcegraph/resources"
              },
              "name": "parameters - 0 - Copy - Copy"
            },
            {
              "type": 1,
              "content": {
                "json": "[SLA for Azure Site Recovery](https://azure.microsoft.com/en-us/support/legal/sla/site-recovery/v1_2/)\r\n* For each Protected Instance configured for On-Premises-to-On-Premises Failover, we guarantee at least 99.9% availability of the Site Recovery service. Availability is calculated over a monthly billing cycle.\r\n* For each Protected Instance configured for On-Premises-to-Azure planned and unplanned Failover, we guarantee a two-hour Recovery Time Objective.\r\n* For each Protected Instance configured for Azure-to-Azure Failover, we guarantee a two-hour Recovery Time Objective.\r\n\r\n> SLA accurate on 26 November 2020. Latest information is available [here](https://azure.microsoft.com/en-us/support/legal/sla/site-recovery/v1_2/)",
                "style": "upsell"
              },
              "conditionalVisibility": {
                "parameterName": "SLA",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "Backup SLA"
            },
            {
              "type": 1,
              "content": {
                "json": "> Azure Site Recovery can help your business to keep doing business during major IT outages. Azure Site Recovery offers ease of deployment, cost effectiveness, and dependability. <br>Deploy replication, failover, and recovery processes through Site Recovery to help keep your applications running during planned and unplanned outages.\r\n\r\n* Where configured, Azure Site Recovery protected Virtual Machines will be listed in a table. \r\n* Ensure that each of the following parameters are selected from the drop down lists:\r\n\t* Subscription\r\n\t* Vault\r\n\t* Resource Group",
                "style": "info"
              },
              "conditionalVisibility": {
                "parameterName": "Help",
                "comparison": "isEqualTo",
                "value": "Yes"
              },
              "name": "Backup Help"
            },
            {
              "type": 3,
              "content": {
                "version": "KqlItem/1.0",
                "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":null,\"headers\":[{\"key\":\"Name\",\"value\":\"$.friendlyName\"},{\"key\":\"PrimaryFabric\",\"value\":\"$.primaryFabricFriendlyName\"},{\"key\":\"RecoveryFabric\",\"value\":\"$.recoveryFabricFriendlyName\"},{\"key\":\"ProtectionState\",\"value\":\"$.protectionState\"},{\"key\":\"ActiveLocation\",\"value\":\"$.activeLocation\"},{\"key\":\"ReplicationHealth\",\"value\":\"$.replicationHealth\"},{\"key\":\"FailoverHealth\",\"value\":\"$.failoverHealth\"},{\"key\":\"PolicyFriendlyName\",\"value\":\"$.policyFriendlyName\"}],\"method\":\"GET\",\"path\":\"/Subscriptions/{Subscription:Id}/resourceGroups/{ResourceGroup}/providers/Microsoft.RecoveryServices/vaults/{Vault}/replicationProtectedItems\",\"urlParams\":[{\"key\":\"api-version\",\"value\":\"2018-07-10\"}],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.value[*].properties\",\"columns\":[]}}]}",
                "size": 0,
                "title": "Azure Site Recovery",
                "queryType": 12,
                "gridSettings": {
                  "formatters": [
                    {
                      "columnMatch": "protectedItemType",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "protectableItemId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "recoveryServicesProviderId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "primaryFabricProvider",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "recoveryFabricId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "primaryProtectionContainerFriendlyName",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "recoveryProtectionContainerFriendlyName",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "protectionState",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Protected",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "unknown",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "protectionStateDescription",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "testFailoverStateDescription",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "allowedOperations",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "replicationHealth",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Warning",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "==",
                            "thresholdValue": "Normal",
                            "representation": "success",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "unknown",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "failoverHealth",
                      "formatter": 18,
                      "formatOptions": {
                        "thresholdsOptions": "icons",
                        "thresholdsGrid": [
                          {
                            "operator": "==",
                            "thresholdValue": "Warning",
                            "representation": "2",
                            "text": "{0}{1}"
                          },
                          {
                            "operator": "Default",
                            "thresholdValue": null,
                            "representation": "unknown",
                            "text": "{0}{1}"
                          }
                        ]
                      }
                    },
                    {
                      "columnMatch": "healthErrors",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "policyId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "currentScenario",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "failoverRecoveryPointId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "providerSpecificDetails",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "recoveryContainerId",
                      "formatter": 5
                    },
                    {
                      "columnMatch": "eventCorrelationId",
                      "formatter": 5
                    }
                  ],
                  "labelSettings": [
                    {
                      "columnId": "friendlyName",
                      "label": "Virtual Machine"
                    },
                    {
                      "columnId": "protectedItemType"
                    },
                    {
                      "columnId": "protectableItemId"
                    },
                    {
                      "columnId": "recoveryServicesProviderId"
                    },
                    {
                      "columnId": "primaryFabricFriendlyName",
                      "label": "PrimaryFabric"
                    },
                    {
                      "columnId": "primaryFabricProvider"
                    },
                    {
                      "columnId": "recoveryFabricFriendlyName",
                      "label": "RecoveryFabric"
                    },
                    {
                      "columnId": "recoveryFabricId"
                    },
                    {
                      "columnId": "primaryProtectionContainerFriendlyName"
                    },
                    {
                      "columnId": "recoveryProtectionContainerFriendlyName"
                    },
                    {
                      "columnId": "protectionState",
                      "label": "ProtectionState"
                    },
                    {
                      "columnId": "protectionStateDescription"
                    },
                    {
                      "columnId": "activeLocation",
                      "label": "ActiveLocation"
                    },
                    {
                      "columnId": "testFailoverState",
                      "label": "TestFailoverState"
                    },
                    {
                      "columnId": "testFailoverStateDescription"
                    },
                    {
                      "columnId": "allowedOperations"
                    },
                    {
                      "columnId": "replicationHealth",
                      "label": "ReplicationHealth"
                    },
                    {
                      "columnId": "failoverHealth",
                      "label": "FailoverHealth"
                    },
                    {
                      "columnId": "healthErrors"
                    },
                    {
                      "columnId": "policyId"
                    },
                    {
                      "columnId": "policyFriendlyName",
                      "label": "PolicyName"
                    },
                    {
                      "columnId": "currentScenario"
                    },
                    {
                      "columnId": "failoverRecoveryPointId"
                    },
                    {
                      "columnId": "providerSpecificDetails"
                    },
                    {
                      "columnId": "recoveryContainerId"
                    },
                    {
                      "columnId": "eventCorrelationId"
                    }
                  ]
                }
              },
              "name": "query - 3"
            }
          ]
        },
        "conditionalVisibility": {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Backup"
        },
        "name": "Backup"
      }
    ],
    "fallbackResourceIds": [
      "Azure Monitor"
    ],
    "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
  }